{
  "$schema": "1.0.0",
  "$id": "https://github.com/marmos91/dittofs/pkg/config/config",
  "properties": {
    "Logging": {
      "properties": {
        "Level": {
          "type": "string"
        },
        "Format": {
          "type": "string"
        },
        "Output": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Level",
        "Format",
        "Output"
      ]
    },
    "Server": {
      "properties": {
        "ShutdownTimeout": {
          "type": "integer"
        },
        "Metrics": {
          "properties": {
            "Enabled": {
              "type": "boolean"
            },
            "Port": {
              "type": "integer"
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "Enabled",
            "Port"
          ]
        },
        "RateLimiting": {
          "properties": {
            "Enabled": {
              "type": "boolean"
            },
            "RequestsPerSecond": {
              "type": "integer"
            },
            "Burst": {
              "type": "integer"
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "Enabled",
            "RequestsPerSecond",
            "Burst"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "ShutdownTimeout",
        "Metrics",
        "RateLimiting"
      ]
    },
    "Content": {
      "properties": {
        "Type": {
          "type": "string"
        },
        "Filesystem": {
          "type": "object"
        },
        "Memory": {
          "type": "object"
        },
        "S3": {
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Type",
        "Filesystem",
        "Memory",
        "S3"
      ]
    },
    "Metadata": {
      "properties": {
        "Type": {
          "type": "string"
        },
        "Memory": {
          "type": "object"
        },
        "Badger": {
          "type": "object"
        },
        "FilesystemCapabilities": {
          "properties": {
            "MaxReadSize": {
              "type": "integer"
            },
            "PreferredReadSize": {
              "type": "integer"
            },
            "MaxWriteSize": {
              "type": "integer"
            },
            "PreferredWriteSize": {
              "type": "integer"
            },
            "MaxFileSize": {
              "type": "integer"
            },
            "MaxFilenameLen": {
              "type": "integer"
            },
            "MaxPathLen": {
              "type": "integer"
            },
            "MaxHardLinkCount": {
              "type": "integer"
            },
            "SupportsHardLinks": {
              "type": "boolean"
            },
            "SupportsSymlinks": {
              "type": "boolean"
            },
            "CaseSensitive": {
              "type": "boolean"
            },
            "CasePreserving": {
              "type": "boolean"
            },
            "ChownRestricted": {
              "type": "boolean"
            },
            "SupportsACLs": {
              "type": "boolean"
            },
            "SupportsExtendedAttrs": {
              "type": "boolean"
            },
            "TruncatesLongNames": {
              "type": "boolean"
            },
            "TimestampResolution": {
              "type": "integer"
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "MaxReadSize",
            "PreferredReadSize",
            "MaxWriteSize",
            "PreferredWriteSize",
            "MaxFileSize",
            "MaxFilenameLen",
            "MaxPathLen",
            "MaxHardLinkCount",
            "SupportsHardLinks",
            "SupportsSymlinks",
            "CaseSensitive",
            "CasePreserving",
            "ChownRestricted",
            "SupportsACLs",
            "SupportsExtendedAttrs",
            "TruncatesLongNames",
            "TimestampResolution"
          ]
        },
        "DumpRestricted": {
          "type": "boolean"
        },
        "DumpAllowedClients": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Type",
        "Memory",
        "Badger",
        "FilesystemCapabilities",
        "DumpRestricted",
        "DumpAllowedClients"
      ]
    },
    "Shares": {
      "items": {
        "properties": {
          "Name": {
            "type": "string"
          },
          "ReadOnly": {
            "type": "boolean"
          },
          "Async": {
            "type": "boolean"
          },
          "AllowedClients": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "DeniedClients": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "RequireAuth": {
            "type": "boolean"
          },
          "AllowedAuthMethods": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "IdentityMapping": {
            "properties": {
              "MapAllToAnonymous": {
                "type": "boolean"
              },
              "MapPrivilegedToAnonymous": {
                "type": "boolean"
              },
              "AnonymousUID": {
                "type": "integer"
              },
              "AnonymousGID": {
                "type": "integer"
              }
            },
            "additionalProperties": false,
            "type": "object",
            "required": [
              "MapAllToAnonymous",
              "MapPrivilegedToAnonymous",
              "AnonymousUID",
              "AnonymousGID"
            ]
          },
          "RootAttr": {
            "properties": {
              "Mode": {
                "type": "integer"
              },
              "UID": {
                "type": "integer"
              },
              "GID": {
                "type": "integer"
              }
            },
            "additionalProperties": false,
            "type": "object",
            "required": [
              "Mode",
              "UID",
              "GID"
            ]
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "Name",
          "ReadOnly",
          "Async",
          "AllowedClients",
          "DeniedClients",
          "RequireAuth",
          "AllowedAuthMethods",
          "IdentityMapping",
          "RootAttr"
        ]
      },
      "type": "array"
    },
    "Adapters": {
      "properties": {
        "NFS": {
          "properties": {
            "Enabled": {
              "type": "boolean"
            },
            "Port": {
              "type": "integer"
            },
            "MaxConnections": {
              "type": "integer"
            },
            "Timeouts": {
              "properties": {
                "Read": {
                  "type": "integer"
                },
                "Write": {
                  "type": "integer"
                },
                "Idle": {
                  "type": "integer"
                },
                "Shutdown": {
                  "type": "integer"
                }
              },
              "additionalProperties": false,
              "type": "object",
              "required": [
                "Read",
                "Write",
                "Idle",
                "Shutdown"
              ]
            },
            "MetricsLogInterval": {
              "type": "integer"
            },
            "RateLimiting": {
              "properties": {
                "Enabled": {
                  "type": "boolean"
                },
                "RequestsPerSecond": {
                  "type": "integer"
                },
                "Burst": {
                  "type": "integer"
                }
              },
              "additionalProperties": false,
              "type": "object",
              "required": [
                "Enabled",
                "RequestsPerSecond",
                "Burst"
              ]
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "Enabled",
            "Port",
            "MaxConnections",
            "Timeouts",
            "MetricsLogInterval",
            "RateLimiting"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "NFS"
      ]
    }
  },
  "additionalProperties": false,
  "type": "object",
  "required": [
    "Logging",
    "Server",
    "Content",
    "Metadata",
    "Shares",
    "Adapters"
  ],
  "title": "DittoFS Configuration",
  "description": "Configuration schema for DittoFS server"
}